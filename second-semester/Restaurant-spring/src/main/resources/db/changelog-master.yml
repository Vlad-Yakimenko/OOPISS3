databaseChangeLog:
  - changeSet:
      id: 1
      author: Vlad Yakymenko
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                  name: user_id
                  type: SERIAL
              - column:
                  constraints:
                    nullable: false
                    unique: true
                  name: username
                  type: VARCHAR(50)
              - column:
                  constraints:
                    nullable: false
                  name: password
                  type: VARCHAR(255)
              - column:
                  constraints:
                    nullable: false
                  name: balance
                  type: integer
              - column:
                  constraints:
                    nullable: false
                  name: role
                  type: VARCHAR(50)
            remarks: Contains registered users
            tableName: users
  - changeSet:
      id: 2
      author: Vlad Yakymenko
      changes:
        - insert:
            columns:
              - column:
                  name: username
                  value: admin
              - column:
                  name: password
                  value: adpass
              - column:
                  name: balance
                  value: 100
              - column:
                  name: role
                  value: ADMIN
            schemaName: public
            tableName: users
        - insert:
            columns:
              - column:
                  name: username
                  value: user
              - column:
                  name: password
                  value: uspass
              - column:
                  name: balance
                  value: 1000
              - column:
                  name: role
                  value: USER
            schemaName: public
            tableName: users
  - changeSet:
      id: 3
      author: Vlad Yakymenko
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                  name: dish_id
                  type: SERIAL
              - column:
                  constraints:
                    nullable: false
                    unique: true
                  name: name
                  type: VARCHAR(50)
              - column:
                  constraints:
                    nullable: false
                  name: price
                  type: float8
              - column:
                  name: description
                  type: VARCHAR(255)
            remarks: Contains all dishes in a menu
            tableName: dishes
  - changeSet:
      id: 4
      author: Vlad Yakymenko
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                  name: order_id
                  type: SERIAL
              - column:
                  name: status
                  type: varchar(20)
              - column:
                  constraints:
                    nullable: false
                    foreignKeyName: user_id_fkey
                    references: users(user_id)
                  name: user_id
                  type: SERIAL
            remarks: Contains all users' orders
            tableName: orders
  - changeSet:
      id: 5
      author: Vlad Yakymenko
      changes:
        - createTable:
            columns:
              - column:
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    foreignKeyName: order_id_fkey
                    references: orders(order_id)
                  name: order_id
                  type: SERIAL
              - column:
                  constraints:
                    primaryKey: true
                    foreignKeyName: dish_id_fkey
                    references: dishes(dish_id)
                  name: dish_id
                  type: SERIAL
              - column:
                  constraints:
                    nullable: false
                  name: quantity
                  type: integer
            remarks: Join table for order to dishes relationship
            tableName: orders_dishes
  - changeSet:
      id: 6
      author: Vlad Yakymenko
      changes:
        - insert:
            columns:
              - column:
                  name: name
                  value: BBQ
              - column:
                  name: price
                  value: 5
              - column:
                  name: description
                  value: smth
            schemaName: public
            tableName: dishes
        - insert:
            columns:
              - column:
                  name: name
                  value: Texas
              - column:
                  name: price
                  value: 6
              - column:
                  name: description
                  value: smth_else
            schemaName: public
            tableName: dishes